<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Get Your Jersey Back Game ðŸ’–</title>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background-color: #ffe6f2;
      color: #a80050;
      text-align: center;
      padding: 20px;
    }
    h1 {
      font-size: 2.5rem;
    }
    button {
      padding: 10px 20px;
      font-size: 1rem;
      border: none;
      border-radius: 20px;
      background-color: #ff99cc;
      color: white;
      cursor: pointer;
      margin: 10px;
      box-shadow: 0 4px 8px #f48fb1;
    }
    button:hover {
      transform: scale(1.05);
    }
    .hidden {
      display: none;
    }
    input[type="text"], input[type="number"] {
      padding: 10px;
      border: 2px solid #ff99cc;
      border-radius: 10px;
      font-size: 1rem;
      margin: 10px 0;
    }
    #gameContainer {
      margin-top: 30px;
    }
    #sudokuGrid {
      display: grid;
      grid-template-columns: repeat(9, 30px);
      gap: 2px;
      justify-content: center;
      margin: 20px auto;
    }
    #sudokuGrid input {
      width: 30px;
      height: 30px;
      text-align: center;
      font-weight: bold;
      color: #a80050;
    }
    #timer {
      font-size: 1.5rem;
      margin: 10px 0;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.4);
      backdrop-filter: blur(3px);
    }
    .modal-content {
      background-color: #ffe0f0;
      margin: 15% auto;
      padding: 30px;
      border: 2px solid #ff99cc;
      border-radius: 20px;
      width: 80%;
      max-width: 400px;
      font-family: 'Comic Sans MS', cursive;
      font-size: 1.1rem;
      color: #a80050;
      box-shadow: 0 0 20px #ff99cc;
      text-align: center;
      animation: popIn 0.4s ease;
    }
    @keyframes popIn {
      from { transform: scale(0.7); opacity: 0; }
      to   { transform: scale(1); opacity: 1; }
    }
    .close-btn {
      float: right;
      font-size: 24px;
      font-weight: bold;
      color: #ff66a3;
      cursor: pointer;
    }
    .close-btn:hover {
      color: #cc005f;
    }
  </style>
</head>
<body>

<h1>Do you want your jersey back? ðŸ‘•ðŸ’”</h1>
<button onclick="showRules()">Yes</button>

<div id="rules" class="hidden">
  <p><strong>Rules:</strong> Complete all these games correctly and then you will receive the passcode to get your jersey back.</p>
  <button onclick="startGame()">Start Game</button>
</div>

<div id="gameContainer" class="hidden">
  <div id="level1">
    <h2>Level 1: Hard Sudoku</h2>
    <div id="timer">07:00</div>
    <div id="sudokuGrid"></div>
    <button onclick="submitSudoku()">Submit Sudoku</button>
  </div>
  <div id="level2" class="hidden">
    <h2>Level 2: Guess the Number (1-500)</h2>
    <input type="number" id="numberGuess" placeholder="Enter your guess">
    <button onclick="checkGuess()">Submit</button>
    <button onclick="showHint()">Hint ðŸ’¡</button>
    <p id="numberFeedback"></p>
    <p id="numberHintText" style="color: #cc338b;"></p>
  </div>
  <div id="level3" class="hidden">
    <h2>Level 3: Type the Correct Sentence</h2>
    <p>"I didnâ€™t deserve anamika, I shouldnâ€™t have disrespected or betrayed her"</p>
    <input type="text" id="sentenceInput" placeholder="Type the exact sentence">
    <button onclick="checkSentence()">Submit</button>
    <p id="sentenceFeedback"></p>
  </div>
  <div id="level4" class="hidden">
    <h2>Level 4: Solve This Hard Math</h2>
    <p>(12Â³ + 7Â²) Ã· 5 - 14 Ã— 2 + âˆš144</p>
    <input type="number" id="mathInput" placeholder="Enter your answer">
    <button onclick="checkMath()">Submit</button>
    <p id="mathFeedback"></p>
  </div>
</div>

<div id="apologyModal" class="modal">
  <div class="modal-content">
    <span class="close-btn">&times;</span>
    <p>ðŸ’¬ For an extra hint, write a minimum <strong>150-word apology</strong> for everything you did that made the host cry â€” and send it to her.</p>
  </div>
</div>

<script>
  const sudokuSolution = [
    [5,3,4,6,7,8,9,1,2],
    [6,7,2,1,9,5,3,4,8],
    [1,9,8,3,4,2,5,6,7],
    [8,5,9,7,6,1,4,2,3],
    [4,2,6,8,5,3,7,9,1],
    [7,1,3,9,2,4,8,5,6],
    [9,6,1,5,3,7,2,8,4],
    [2,8,7,4,1,9,6,3,5],
    [3,4,5,2,8,6,1,7,9]
  ];
  const sudokuPuzzle = [
    [5,null,null,6,null,null,null,1,null],
    [null,7,null,null,9,5,null,null,null],
    [1,null,8,null,null,2,null,6,null],
    [null,null,9,7,null,null,null,2,null],
    [4,null,6,null,5,null,7,null,1],
    [null,1,null,null,null,4,8,null,null],
    [null,6,null,5,null,null,2,null,4],
    [null,null,null,4,1,null,null,3,null],
    [null,4,null,null,null,6,null,null,9]
  ];
  let currentLevel = 1;
  let timer;
  let timeLeft = 420;
  let wrongGuessCount = 0;

  const modal = document.getElementById("apologyModal");
  const closeBtn = document.querySelector(".close-btn");
  closeBtn.onclick = () => modal.style.display = "none";
  window.onclick = (e) => { if (e.target == modal) modal.style.display = "none"; };

  function showRules() {
    document.querySelector("h1").style.display = "none";
    document.querySelector("button").style.display = "none";
    document.getElementById("rules").classList.remove("hidden");
  }

  function startGame() {
    document.getElementById("rules").classList.add("hidden");
    document.getElementById("gameContainer").classList.remove("hidden");
    startTimer();
    renderSudoku();
  }

  function startTimer() {
    updateTimer();
    timer = setInterval(() => {
      timeLeft--;
      updateTimer();
      if (timeLeft === 30) alert("Last 30 seconds remaining before having to start again!");
      if (timeLeft <= 0) {
        alert("Time's up! Starting a new Sudoku.");
        timeLeft = 420;
        renderSudoku();
      }
    }, 1000);
  }

  function updateTimer() {
    const minutes = Math.floor(timeLeft / 60).toString().padStart(2, "0");
    const seconds = (timeLeft % 60).toString().padStart(2, "0");
    document.getElementById("timer").textContent = `${minutes}:${seconds}`;
  }

  function renderSudoku() {
    const grid = document.getElementById("sudokuGrid");
    grid.innerHTML = "";
    for (let r = 0; r < 9; r++) {
      for (let c = 0; c < 9; c++) {
        const cell = document.createElement("input");
        cell.type = "text";
        cell.maxLength = 1;
        cell.dataset.row = r;
        cell.dataset.col = c;
        if (sudokuPuzzle[r][c] !== null) {
          cell.value = sudokuPuzzle[r][c];
          cell.readOnly = true;
        }
        grid.appendChild(cell);
      }
    }
  }

  function submitSudoku() {
    const inputs = document.querySelectorAll("#sudokuGrid input");
    let isCorrect = true;
    inputs.forEach(input => {
      const r = +input.dataset.row;
      const c = +input.dataset.col;
      const val = parseInt(input.value);
      if (val !== sudokuSolution[r][c]) isCorrect = false;
    });
    if (isCorrect) {
      clearInterval(timer);
      goToNextLevel();
    } else {
      alert("Incorrect Sudoku solution, try again!");
    }
  }

  function checkGuess() {
    const guess = parseInt(document.getElementById("numberGuess").value);
    if (guess === 289) {
      goToNextLevel();
    } else {
      document.getElementById("numberFeedback").textContent = "Wrong number, try again!";
      wrongGuessCount++;
      if (wrongGuessCount === 5) {
        modal.style.display = "block";
      }
    }
  }

  function showHint() {
    document.getElementById("numberHintText").textContent = "Hint: The number starts with 2 ðŸ’¡";
  }

  function checkSentence() {
    const user = document.getElementById("sentenceInput").value.trim().toLowerCase();
    const correct = "i didnâ€™t deserve anamika, i shouldnâ€™t have disrespected or betrayed her";
    if (user === correct) {
      goToNextLevel();
    } else {
      document.getElementById("sentenceFeedback").textContent = "Not quite right, try again.";
    }
  }

  function checkMath() {
    const answer = parseFloat(document.getElementById("mathInput").value);
    const correct = 339.4;
    if (Math.abs(answer - correct) < 0.01) {
      document.getElementById("gameContainer").innerHTML = "<h2>ðŸŽ† Congratulations!!</h2><p>The password is: <strong>sorry</strong><br>Please message the host this password to arrange for a collection.</p>";
    } else {
      document.getElementById("mathFeedback").textContent = "Incorrect answer, try again.";
    }
  }

  function goToNextLevel() {
    document.getElementById("level" + currentLevel).classList.add("hidden");
    currentLevel++;
    document.getElementById("level" + currentLevel).classList.remove("hidden");
  }
</script>

</body>
</html>
